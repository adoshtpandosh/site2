<?php
// api/bot.php  ???? ?????? ????? ?????? ????
$token   = 'YOUR_TOKEN_HERE';        // ? ???? ???? ?? ????? ?????
$admin   = 'YOUR_ADMIN_CHAT_ID';     // ? ???? ???? ?? ????? ?????
$website = "https://api.telegram.org/bot{$token}";

$content = file_get_contents("php://input");
$update  = json_decode($content, true);
if (!isset($update['message'])) exit;

$chat_id = $update['message']['chat']['id'];
$text    = $update['message']['text'] ?? '';

// ???? ????? ????
function sendMsg($id, $txt, $keyboard = null){
    global $website;
    $url = $website."/sendMessage?chat_id=$id&text=".urlencode($txt);
    if($keyboard) $url .= "&reply_markup=".json_encode($keyboard);
    file_get_contents($url);
}

// ???? ??????? ????
$menu = [
    'keyboard' => [
        [['text' => '?? ???? ????']],
        [['text' => '?? ????????']],
        [['text' => '? ???????']]
    ],
    'resize_keyboard' => true
];

switch ($text) {
    case '/start':
        sendMsg($chat_id, "?? ???? ?? ???? ????? ?????? ????\n????? ?? ???? ??? ?????? ????:", $menu);
        break;

    case '?? ???? ????':
        sendMsg($chat_id, "?? ???? ???????:\n ?????? ??? ???: ?,???,??? ?\n ????????? ?????: ?,???,??? ?\n ????? ???? ?????: ?,???,??? ?");
        break;

    case '?? ????????':
        sendMsg($chat_id, "?? ???? ?? ??:\n09370769191\n09921352088");
        break;

    case '? ???????':
        file_get_contents($website."/sendPoll?chat_id=$chat_id&question=?? ???? ?? ???? ????? ?????&options=" . urlencode(json_encode(['?? ????', '?? ???', '?? ?????', '?? ????'])));
        break;

    default:
        // ????? ??? ????? ?? ????? (????? ????)
        $forward = "?? ????? ???? ?? ????:\n\n$text";
        sendMsg($admin, $forward);
        sendMsg($chat_id, "? ????? ??? ??? ??. ?? ???? ?? ??? ???? ?????? ????.", $menu);
}
?>